{"version":3,"sources":["../src/index.js"],"names":["modeHelp","Object","keys","ZaicoOpes","map","v","idx","join","fixedArgs","name","short","type","description","rcDefault","cacheFile","editedFile","apiUrl","waitMills","waitPerCount","requestMaxPage","mapping","jan","picture","convert","argv","option","args","run","mode","options","shift","opeCreator","console","log","help","process","exit","rc","assign","JsonUtil","loadJson","processFiles","targets","then","res","catch","e"],"mappings":";;AAAA;;AACA;;;;AACA;;;;AACA;;;;;;AAEA,IAAMA,WAAWC,OAAOC,IAAP,CAAYC,kBAAZ,EACdC,GADc,CACV,UAACC,CAAD,EAAIC,GAAJ;AAAA,SAAYA,MAAMD,CAAN,GAAaA,CAAb,cAAZ;AAAA,CADU,EAEdE,IAFc,CAET,IAFS,CAAjB,C,CAL0B;;;AAS1B,IAAMC,YAAY,CAAE;AAClBC,QAAM,OADY;AAElBC,SAAO,GAFW;AAGlBC,QAAM,SAHY;AAIlBC,eAAa;AAJK,CAAF,EAKf;AACDH,QAAM,QADL;AAEDE,QAAM,SAFL;AAGDC,eAAa;AAHZ,CALe,EASf;AACDH,QAAM,OADL;AAEDC,SAAO,GAFN;AAGDC,QAAM,SAHL;AAIDC,eAAa;AAJZ,CATe,EAcf;AACDH,QAAM,QADL;AAEDE,QAAM,SAFL;AAGDC,eAAa;AAHZ,CAde,EAkBf;AACDH,QAAM,QADL;AAEDE,QAAM,SAFL;AAGDC,eAAa;AAHZ,CAlBe,EAsBf;AACDH,QAAM,MADL;AAEDC,SAAO,GAFN;AAGDC,QAAM,QAHL;AAIDC,8BAA0BZ;AAJzB,CAtBe,CAAlB;;AA6BA,IAAMa,YAAY;AAChBC,aAAW,iBADK;AAEhBC,cAAY,kBAFI;AAGhBC,UAAQ,4CAHQ;AAIhBC,aAAW,IAJK;AAKhBC,gBAAc,EALE;AAMhBC,kBAAgB,CANA;AAOhBC,WAAS;AACPC,SAAK,MADE;AAEPC,aAAS;AAFF,GAPO;AAWhBC,WAAS;AACPD,aAAS;AADF;AAXO,CAAlB;;AAgBAE,eAAKC,MAAL,WAAiBjB,SAAjB;AACA,IAAMkB,OAAOF,eAAKG,GAAL,EAAb;AACA,IAAMC,OAAOF,KAAKG,OAAL,CAAaD,IAAb,IAAqB3B,OAAOC,IAAP,CAAYC,kBAAZ,EAAuB2B,KAAvB,EAAlC;AACA,IAAMC,aAAa5B,mBAAUyB,IAAV,CAAnB;;AAEA,IAAI,CAACG,UAAL,EAAiB;AACfC,UAAQC,GAAR,WAAoBL,IAApB;AACAJ,iBAAKU,IAAL;AACAC,UAAQC,IAAR,CAAa,CAAb;AACD,CAJD,MAIO;AACL,MAAI;AACF,QAAMC,KAAKpC,OAAOqC,MAAP,CAAczB,SAAd,EAAyB0B,mBAASC,QAAT,CAAkB,oBAAlB,CAAzB,CAAX;AACAT,eAAWM,EAAX,EAAeX,KAAKG,OAApB,EAA6BY,YAA7B,CAA0Cf,KAAKgB,OAA/C,EAAwDC,IAAxD,CAA6D,eAAO;AAClE,UAAI,CAACC,GAAL,EAAU;AACRpB,uBAAKU,IAAL;AACAC,gBAAQC,IAAR,CAAa,CAAb;AACD;AACF,KALD,EAKGS,KALH,CAKS,aAAK;AACZ,YAAMC,CAAN;AACD,KAPD;AAQD,GAVD,CAUE,OAAOA,CAAP,EAAU;AACVd,YAAQC,GAAR,CAAYa,CAAZ;AACAX,YAAQC,IAAR,CAAa,CAAb;AACD;AACF","file":"index.js","sourcesContent":["import 'babel-polyfill';  // eslint-disable-line import/no-extraneous-dependencies\nimport argv from 'argv';\nimport ZaicoOpes from './ZaicoOpe';\nimport JsonUtil from './util/JsonUtil'\n\nconst modeHelp = Object.keys(ZaicoOpes)\n  .map((v, idx) => idx ? v : `${v}(default)`)\n  .join(', ');\n\nconst fixedArgs = [ {\n  name: 'cache',\n  short: 'c',\n  type: 'boolean',\n  description: 'enable cache',\n}, {\n  name: 'dryrun',\n  type: 'boolean',\n  description: 'dry run mode',\n}, {\n  name: 'force',\n  short: 'f',\n  type: 'boolean',\n  description: 'force mode',\n}, {\n  name: 'latest',\n  type: 'boolean',\n  description: 'keep latest in deleteDuplicate mode',\n}, {\n  name: 'oldest',\n  type: 'boolean',\n  description: 'keep oldest in deleteDuplicate mode',\n}, {\n  name: 'mode',\n  short: 'm',\n  type: 'string',\n  description: `run mode. ${modeHelp}`,\n} ];\n\nconst rcDefault = {\n  cacheFile: './zr_cache.json',\n  editedFile: './zr_edited.json',\n  apiUrl: 'https://web.zaico.co.jp/api/v1/inventories',\n  waitMills: 2000,\n  waitPerCount: 10,\n  requestMaxPage: 0,\n  mapping: {\n    jan: 'code',\n    picture: 'item_image'\n  },\n  convert: {\n    picture: 'fileToBase64'\n  },\n};\n\nargv.option([ ...fixedArgs]);\nconst args = argv.run();\nconst mode = args.options.mode || Object.keys(ZaicoOpes).shift();\nconst opeCreator = ZaicoOpes[mode];\n\nif (!opeCreator) {\n  console.log(`mode[${mode}]が定義されていません`);\n  argv.help();\n  process.exit(1);\n} else {\n  try {\n    const rc = Object.assign(rcDefault, JsonUtil.loadJson('./.zaicoregisterrc'));\n    opeCreator(rc, args.options).processFiles(args.targets).then(res => {\n      if (!res) {\n        argv.help();\n        process.exit(2);\n      }\n    }).catch(e => {\n      throw e;\n    });\n  } catch (e) {\n    console.log(e);\n    process.exit(3);\n  }\n}\n"]}